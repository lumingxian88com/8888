<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>539 åŠ å¤§åˆ†æ - æœ€çµ‚ç‰ˆ</title>
  <script src="2025.js"></script>
  <style>
    body { margin:0; background:#000; color:#fff; font-family:sans-serif; display:flex; flex-direction:column; height:100vh; overflow:hidden; }
    .header { background:#111; padding:15px; border-bottom:2px solid #f00; display:flex; justify-content:space-around; align-items:center; }
    .best-box { border: 2px solid #ff0; background: #220; padding:10px; border-radius:10px; text-align:center; min-width:150px; box-shadow: 0 0 10px rgba(255,255,0,0.5); }
    .best-num { color: #f00; font-size: 36px; font-weight: bold; display: inline-block; margin: 0 8px; text-shadow: 0 0 12px #f00; }
    .main-area { flex-grow:1; display:flex; }
    canvas { background:#000; flex-grow:1; }
    .controls { width:140px; background:#111; padding:15px; display:flex; flex-direction:column; gap:15px; border-left:1px solid #333; }
    button { padding:20px 5px; background:#444; color:#fff; border:2px solid #f00; border-radius:10px; font-size:22px; font-weight:bold; cursor:pointer; }
    .val-display { font-size:28px; color:#0f0; text-align:center; font-weight:bold; }
  </style>
</head>
<body>

<div class="header">
    <div style="color:#aaa; font-size:16px;">ğŸ¯ ä»Šæ—¥æœ€å¼· 5 ç´…é»ï¼š</div>
    <div id="res-list" class="best-box">è¨ˆç®—ä¸­...</div>
</div>

<div class="main-area">
    <canvas id="chart"></canvas>
    <div class="controls">
        <div style="font-size:14px;color:#888;text-align:center;">å¤©æ•¸å€ç‡</div>
        <div id="val-days" class="val-display">6</div>
        <button id="btn-inc">åŠ å¤§ â–²</button>
        <button id="btn-dec">ç¸®å° â–¼</button>
    </div>
</div>

<script>
const baseN39 = [31,37,37,48,42,40,56,45,41,39,44,47,38,49,32,30,27,37,41,36,39,43,39,53,36,48,54,46,43,35,44,34,35,34,40,38,37,30,35];

window.onload = function() {
    if (typeof rawData === 'undefined') {
        document.getElementById('res-list').innerHTML = "<span style='color:red'>æ‰¾ä¸åˆ°2025.js</span>";
        return;
    }
    
    let currentFreq = [...baseN39];
    rawData.forEach(draw => {
        draw.forEach(numStr => {
            let n = parseInt(numStr);
            if(n >= 1 && n <= 39) currentFreq[n-1]++;
        });
    });

    let top5 = currentFreq.map((v, i) => ({n: i + 1, v: v}))
                          .sort((a, b) => b.v - a.v).slice(0, 5);
    
    document.getElementById('res-list').innerHTML = top5.map(x => 
        `<span class="best-num">${x.n.toString().padStart(2,'0')}</span>`).join('');

    startChart(currentFreq, rawData);
};

function startChart(freqData, raw) {
    const c = document.getElementById('chart'), ctx = c.getContext('2d');
    let mult = 1, blink = true;

    function draw() {
        c.width = window.innerWidth - 140; c.height = window.innerHeight - 80;
        const days = mult * 6, pad = {l:60, r:20, t:30, b:50};
        const w = c.width-pad.l-pad.r, h = c.height-pad.t-pad.b;
        const cw = w/39, rh = h/days;
        
        ctx.fillStyle = '#000'; ctx.fillRect(0,0,c.width,c.height);
        
        freqData.forEach((v, i) => {
            const x = pad.l + i*cw;
            let barH = (v / (Math.max(...freqData) + 5)) * h;
            ctx.fillStyle = blink ? 'rgba(0,180,255,0.4)' : 'rgba(0,180,255,0.1)';
            ctx.fillRect(x+1, pad.t + h - barH, cw-2, barH);
            ctx.fillStyle = '#666'; ctx.font='12px Arial'; ctx.textAlign='center';
            ctx.fillText((i+1).toString().padStart(2,'0'), x + cw/2, pad.t + h + 20);
        });

        for(let r=0; r<days; r++) {
            if(raw[r]) {
                const y = pad.t + r*rh + rh/2;
                raw[r].forEach(nStr => {
                    ctx.beginPath();
                    ctx.arc(pad.l + (parseInt(nStr)-1)*cw + cw/2, y, Math.min(cw, rh)/2.5, 0, Math.PI*2);
                    ctx.fillStyle = blink ? '#f00' : '#444'; ctx.fill();
                });
            }
        }
    }

    setInterval(() => { blink = !blink; draw(); }, 500);
    document.getElementById('btn-inc').onclick = () => { mult = mult>=10?1:mult+1; document.getElementById('val-days').textContent=mult*6; draw(); };
    document.getElementById('btn-dec').onclick = () => { mult = mult<=1?10:mult-1; document.getElementById('val-days').textContent=mult*6; draw(); };
    window.onresize = draw;
    draw();
}
</script>
</body>
</html>
