<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>539 åŠ å¤§åˆ†æå„€ - ç‹€æ…‹ç‰ˆ</title>
  <style>
    body { margin:0; background:#000; color:#fff; font-family:sans-serif; display:flex; flex-direction:column; height:100vh; overflow:hidden; }
    /* ç‹€æ…‹åˆ— */
    .status-bar { background:#222; padding:5px 15px; font-size:12px; display:flex; align-items:center; gap:10px; border-bottom:1px solid #444; }
    .dot { width:10px; height:10px; border-radius:50%; display:inline-block; }
    .dot-blue { background: #007bff; box-shadow: 0 0 5px #007bff; }
    .dot-green { background: #28a745; box-shadow: 0 0 5px #28a745; }
    .dot-red { background: #dc3545; box-shadow: 0 0 5px #dc3545; }

    .header { background:#111; padding:15px; border-bottom:2px solid #f00; display:flex; justify-content:space-around; align-items:center; }
    .best-box { border: 2px solid #ff0; background: #220; padding:10px; border-radius:10px; text-align:center; min-width:150px; }
    .best-num { color: #f00; font-size: 36px; font-weight: bold; display: inline-block; margin: 0 8px; text-shadow: 0 0 12px #f00; }
    .main-area { flex-grow:1; display:flex; }
    canvas { background:#000; flex-grow:1; }
    .controls { width:140px; background:#111; padding:15px; display:flex; flex-direction:column; gap:15px; border-left:1px solid #333; }
    button { padding:20px 5px; background:#444; color:#fff; border:1px solid #f00; border-radius:10px; font-size:22px; font-weight:bold; cursor:pointer; }
    .val-display { font-size:28px; color:#0f0; text-align:center; font-weight:bold; }
  </style>
</head>
<body>

<div class="status-bar" id="status-line">
    <span id="status-dot" class="dot dot-blue"></span>
    <span id="status-text">æ­£åœ¨è®€å– GitHub é›²ç«¯æ•¸æ“š...</span>
</div>

<div class="header">
    <div style="color:#aaa; font-size:16px;">ğŸ¯ ä»Šæ—¥æœ€å¼· 5 ç´…é»ï¼š</div>
    <div id="res-list" class="best-box">--</div>
</div>

<div class="main-area">
    <canvas id="chart"></canvas>
    <div class="controls">
        <div style="font-size:14px;color:#888;text-align:center;">å¤©æ•¸å€ç‡</div>
        <div id="val-days" class="val-display">6</div>
        <button id="btn-inc">åŠ å¤§ â–²</button>
        <button id="btn-dec">ç¸®å° â–¼</button>
    </div>
</div>

<script>
const baseN39 = [31,37,37,48,42,40,56,45,41,39,44,47,38,49,32,30,27,37,41,36,39,43,39,53,36,48,54,46,43,35,44,34,35,34,40,38,37,30,35];

// å¼·åˆ¶æŠ“å–æœ€æ–°è³‡æ–™çš„å‡½æ•¸
function loadData() {
    const script = document.createElement('script');
    // åŠ ä¸Š ?t=æ™‚é–“æˆ³è¨˜ï¼Œé˜²æ­¢ç€è¦½å™¨è®€åˆ°èˆŠçš„æš«å­˜æª”
    script.src = "https://lumingxian88com.github.io/8888/2025.js?t=" + Date.now();
    
    script.onload = () => {
        if (typeof rawData !== 'undefined') {
            updateStatus('success', `é€£ç·šæˆåŠŸï¼å·²è®€å–åˆ° ${rawData.length} æœŸæ•¸æ“š`);
            startAnalysis(rawData);
        } else {
            updateStatus('error', 'é€£ç·šæˆåŠŸä½†æ‰¾ä¸åˆ°æ•¸æ“šæ ¼å¼ (rawData)');
        }
    };
    
    script.onerror = () => {
        updateStatus('error', 'é€£ç·šå¤±æ•—ï¼è«‹æª¢æŸ¥ç¶²è·¯æˆ– GitHub ç¶²å€');
    };
    
    document.head.appendChild(script);
}

function updateStatus(type, msg) {
    const dot = document.getElementById('status-dot');
    const txt = document.getElementById('status-text');
    txt.innerText = msg;
    if(type === 'success') {
        dot.className = 'dot dot-green';
    } else {
        dot.className = 'dot dot-red';
        document.getElementById('res-list').innerHTML = "<span style='color:red'>ERR</span>";
    }
}

function startAnalysis(data) {
    let currentFreq = [...baseN39];
    data.forEach(draw => {
        draw.forEach(numStr => {
            let n = parseInt(numStr);
            if(n >= 1 && n <= 39) currentFreq[n-1]++;
        });
    });
    let top5 = currentFreq.map((v, i) => ({n: i + 1, v: v}))
                          .sort((a, b) => b.v - a.v).slice(0, 5);
    document.getElementById('res-list').innerHTML = top5.map(x => 
        `<span class="best-num">${x.n.toString().padStart(2,'0')}</span>`).join('');
    initChart(currentFreq, data);
}

function initChart(freqData, raw) {
    const c = document.getElementById('chart'), ctx = c.getContext('2d');
    let mult = 1, blink = true;
    function draw() {
        c.width = window.innerWidth - 140; c.height = window.innerHeight - 80;
        const days = mult * 6, pad = {l:60, r:20, t:30, b:50};
        const w = c.width-pad.l-pad.r, h = c.height-pad.t-pad.b;
        const cw = w/39, rh = h/days;
        ctx.fillStyle = '#000'; ctx.fillRect(0,0,c.width,c.height);
        freqData.forEach((v, i) => {
            const x = pad.l + i*cw;
            let barH = (v / (Math.max(...freqData) + 5)) * h;
            ctx.fillStyle = blink ? 'rgba(0,180,255,0.4)' : 'rgba(0,180,255,0.1)';
            ctx.fillRect(x+1, pad.t + h - barH, cw-2, barH);
            ctx.fillStyle = '#666'; ctx.font='12px Arial'; ctx.textAlign='center';
            ctx.fillText((i+1).toString().padStart(2,'0'), x + cw/2, pad.t + h + 20);
        });
        for(let r=0; r<days; r++) {
            if(raw[r]) {
                const y = pad.t + r*rh + rh/2;
                raw[r].forEach(nStr => {
                    ctx.beginPath();
                    ctx.arc(pad.l + (parseInt(nStr)-1)*cw + cw/2, y, Math.min(cw, rh)/2.5, 0, Math.PI*2);
                    ctx.fillStyle = blink ? '#f00' : '#444'; ctx.fill();
                });
            }
        }
    }
    setInterval(() => { blink = !blink; draw(); }, 500);
    document.getElementById('btn-inc').onclick = () => { mult = mult>=10?1:mult+1; document.getElementById('val-days').textContent=mult*6; draw(); };
    document.getElementById('btn-dec').onclick = () => { mult = mult<=1?10:mult-1; document.getElementById('val-days').textContent=mult*6; draw(); };
    window.onresize = draw;
    draw();
}

// å•Ÿå‹•é€£ç·š
loadData();
</script>
</body>
</html>

<script>
// ä½ ä¹‹å‰çµ¦æˆ‘çš„åŸºç¤é »ç‡
const baseN39 = [31,37,37,48,42,40,56,45,41,39,44,47,38,49,32,30,27,37,41,36,39,43,39,53,36,48,54,46,43,35,44,34,35,34,40,38,37,30,35];

window.onload = function() {
    // æª¢æŸ¥ rawData æ˜¯å¦æˆåŠŸè¼‰å…¥
    if (typeof rawData === 'undefined') {
        document.getElementById('res-list').innerHTML = "<span style='color:red'>é€£ç·šå¤±æ•—ï¼Œè«‹æª¢æŸ¥ 2025.js</span>";
        return;
    }
    
    // è¨ˆç®—é‚è¼¯ï¼šåŸºç¤æ¬¡æ•¸ + æ­·å²è™Ÿç¢¼å‡ºç¾æ¬¡æ•¸
    let currentFreq = [...baseN39];
    rawData.forEach(draw => {
        draw.forEach(numStr => {
            let n = parseInt(numStr);
            if(n >= 1 && n <= 39) currentFreq[n-1]++;
        });
    });

    // æ’åºä¸¦æ‰¾å‡ºæœ€å¼·å‰ 5 å
    let top5 = currentFreq.map((v, i) => ({n: i + 1, v: v}))
                          .sort((a, b) => b.v - a.v).slice(0, 5);
    
    // é¡¯ç¤ºè™Ÿç¢¼
    document.getElementById('res-list').innerHTML = top5.map(x => 
        `<span class="best-num">${x.n.toString().padStart(2,'0')}</span>`).join('');

    // ç•«åœ–
    startChart(currentFreq, rawData);
};

function startChart(freqData, raw) {
    const c = document.getElementById('chart'), ctx = c.getContext('2d');
    let mult = 1, blink = true;

    function draw() {
        c.width = window.innerWidth - 140; c.height = window.innerHeight - 80;
        const days = mult * 6, pad = {l:60, r:20, t:30, b:50};
        const w = c.width-pad.l-pad.r, h = c.height-pad.t-pad.b;
        const cw = w/39, rh = h/days;
        
        ctx.fillStyle = '#000'; ctx.fillRect(0,0,c.width,c.height);
        
        // ç•«é »ç‡æ¢
        freqData.forEach((v, i) => {
            const x = pad.l + i*cw;
            let barH = (v / (Math.max(...freqData) + 5)) * h;
            ctx.fillStyle = blink ? 'rgba(0,180,255,0.4)' : 'rgba(0,180,255,0.1)';
            ctx.fillRect(x+1, pad.t + h - barH, cw-2, barH);
            ctx.fillStyle = '#666'; ctx.font='12px Arial'; ctx.textAlign='center';
            ctx.fillText((i+1).toString().padStart(2,'0'), x + cw/2, pad.t + h + 20);
        });

        // ç•«ç´…é»
        for(let r=0; r<days; r++) {
            if(raw[r]) {
                const y = pad.t + r*rh + rh/2;
                raw[r].forEach(nStr => {
                    ctx.beginPath();
                    ctx.arc(pad.l + (parseInt(nStr)-1)*cw + cw/2, y, Math.min(cw, rh)/2.5, 0, Math.PI*2);
                    ctx.fillStyle = blink ? '#f00' : '#444'; ctx.fill();
                });
            }
        }
    }

    setInterval(() => { blink = !blink; draw(); }, 500);
    document.getElementById('btn-inc').onclick = () => { mult = mult>=10?1:mult+1; document.getElementById('val-days').textContent=mult*6; draw(); };
    document.getElementById('btn-dec').onclick = () => { mult = mult<=1?10:mult-1; document.getElementById('val-days').textContent=mult*6; draw(); };
    window.onresize = draw;
    draw();
}
</script>
</body>
</html>

window.onload = function() {
    if (typeof rawData === 'undefined') {
        document.getElementById('res-list').innerHTML = "<span style='color:red'>æ‰¾ä¸åˆ°2025.js</span>";
        return;
    }
    
    let currentFreq = [...baseN39];
    rawData.forEach(draw => {
        draw.forEach(numStr => {
            let n = parseInt(numStr);
            if(n >= 1 && n <= 39) currentFreq[n-1]++;
        });
    });

    let top5 = currentFreq.map((v, i) => ({n: i + 1, v: v}))
                          .sort((a, b) => b.v - a.v).slice(0, 5);
    
    document.getElementById('res-list').innerHTML = top5.map(x => 
        `<span class="best-num">${x.n.toString().padStart(2,'0')}</span>`).join('');

    startChart(currentFreq, rawData);
};

function startChart(freqData, raw) {
    const c = document.getElementById('chart'), ctx = c.getContext('2d');
    let mult = 1, blink = true;

    function draw() {
        c.width = window.innerWidth - 140; c.height = window.innerHeight - 80;
        const days = mult * 6, pad = {l:60, r:20, t:30, b:50};
        const w = c.width-pad.l-pad.r, h = c.height-pad.t-pad.b;
        const cw = w/39, rh = h/days;
        
        ctx.fillStyle = '#000'; ctx.fillRect(0,0,c.width,c.height);
        
        freqData.forEach((v, i) => {
            const x = pad.l + i*cw;
            let barH = (v / (Math.max(...freqData) + 5)) * h;
            ctx.fillStyle = blink ? 'rgba(0,180,255,0.4)' : 'rgba(0,180,255,0.1)';
            ctx.fillRect(x+1, pad.t + h - barH, cw-2, barH);
            ctx.fillStyle = '#666'; ctx.font='12px Arial'; ctx.textAlign='center';
            ctx.fillText((i+1).toString().padStart(2,'0'), x + cw/2, pad.t + h + 20);
        });

        for(let r=0; r<days; r++) {
            if(raw[r]) {
                const y = pad.t + r*rh + rh/2;
                raw[r].forEach(nStr => {
                    ctx.beginPath();
                    ctx.arc(pad.l + (parseInt(nStr)-1)*cw + cw/2, y, Math.min(cw, rh)/2.5, 0, Math.PI*2);
                    ctx.fillStyle = blink ? '#f00' : '#444'; ctx.fill();
                });
            }
        }
    }

    setInterval(() => { blink = !blink; draw(); }, 500);
    document.getElementById('btn-inc').onclick = () => { mult = mult>=10?1:mult+1; document.getElementById('val-days').textContent=mult*6; draw(); };
    document.getElementById('btn-dec').onclick = () => { mult = mult<=1?10:mult-1; document.getElementById('val-days').textContent=mult*6; draw(); };
    window.onresize = draw;
    draw();
}
</script>
</body>
</html>
