<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>539 終極精密分析儀 V9.0</title>
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: 'Segoe UI', sans-serif; overflow: hidden; display: flex; }
        #chart-wrap { flex: 1; height: 100vh; position: relative; background: radial-gradient(circle at center, #111 0%, #000 100%); }
        canvas { display: block; }
        .side { width: 170px; background: rgba(15, 15, 15, 0.95); border-left: 2px solid #ff0000; display: flex; flex-direction: column; gap: 15px; padding: 15px; box-sizing: border-box; backdrop-filter: blur(10px); }
        .card { background: linear-gradient(145deg, #1a1a1a, #111); border: 1px solid #333; border-radius: 15px; padding: 12px; text-align: center; box-shadow: 5px 5px 15px rgba(0,0,0,0.5); }
        .card label { font-size: 11px; color: #666; letter-spacing: 2px; text-transform: uppercase; }
        .val { font-size: 32px; color: #00ff00; font-weight: 900; margin: 5px 0; font-family: 'Consolas', monospace; text-shadow: 0 0 15px rgba(0,255,0,0.4); }
        button { width: 100%; padding: 14px; margin: 5px 0; background: #222; color: #fff; border: 1px solid #ff0000; border-radius: 10px; cursor: pointer; font-size: 20px; font-weight: bold; transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
        button:active { background: #ff0000; transform: translateY(2px) scale(0.95); box-shadow: 0 0 20px rgba(255,0,0,0.4); }
        .timer-container { height: 4px; background: #111; border-radius: 2px; overflow: hidden; margin-top: 5px; }
        #timer-bar { height: 100%; background: #ff0000; width: 0%; box-shadow: 0 0 10px #ff0000; }
        .status-tag { margin-top: auto; font-size: 9px; color: #333; text-align: center; letter-spacing: 1px; }
    </style>
</head>
<body>

<div id="chart-wrap"><canvas id="main"></canvas></div>

<div class="side">
    <div class="card">
        <label>Auto Return</label>
        <div class="timer-container"><div id="timer-bar"></div></div>
    </div>
    <div class="card">
        <label>分析天數</label>
        <div id="d-v" class="val">06</div>
        <button onclick="chgD(1)">▲</button>
        <button onclick="chgD(-1)">▼</button>
    </div>
    <div class="card">
        <label>日期軌鎖定</label>
        <div id="r-v" class="val">00</div>
        <button onclick="chgR(1)">▲</button>
        <button onclick="chgR(-1)">▼</button>
    </div>
    <div class="card">
        <label>號碼掃描</label>
        <div id="c-v" class="val">01</div>
        <button onclick="chgC(1)">▲</button>
        <button onclick="chgC(-1)">▼</button>
    </div>
    <div class="status-tag">CORE ENGINE V9.0 | CALIBRATED</div>
</div>

<script>
const F = [31,37,37,48,41,40,56,44,41,37,42,46,37,49,32,30,27,37,41,36,39,43,39,52,36,47,53,46,42,35,44,34,34,34,39,38,36,46,39];
const D =[8,10,11,26,35],[11,12,24,27,33],[5,10,13,29,37],[1,15,19,28,38],[1,10,20,27,36],[14,18,28,36,39],[2,3,14,25,30],[9,22,24,30,35],[2,22,24,27,38],[1,5,16,35,38],[12,16,23,27,30],[4,9,32,33,36],[5,6,7,19,32],[2,10,14,33,35],[3,17,27,29,38],[2,9,21,31,38],[10,24,26,28,35],[2,6,17,25,26],[4,7,11,16,26],[7,8,15,30,39],[5,23,27,28,31],[6,22,23,24,32],[2,3,16,17,29],[1,7,20,25,37],[5,9,14,33,35],[2,5,8,13,29],[2,3,4,20,24],[8,27,30,33,36],[8,13,14,22,28],[7,19,22,25,28],[8,6,12,22,34],[9,30,36,38,39],[2,4,5,17,31],[10,13,32,33,37],[5,10,17,28,35],[1,5,33,36,38],[3,11,20,28,31],[14,24,31,36,37],[4,7,16,16,29],[12,20,25,28,29],[2,11,15,37,38],[13,18,20,23,36],[1,4,9,14,22],[5,19,31,34,39],[7,14,15,17,30],[7,8,9,26,34],[22,27,30,32,37],[7,24,28,31,32],[11,14,15,27,39],[1,7,12,29,39],[24,25,34,36,37],[8,12,19,27,28],[11,18,25,26,33],[5,27,28,31,37],[26,32,33,36,39],[18,20,25,29,31],[3,20,26,31,37],[3,4,11,21,34],[8,11,13,37,38],[18,15,27,37,38],[3,4,20,25,28],[13,22,30,37,38],[6,13,22,23,27],[2,17,32,35,38]];
const cvs = document.getElementById('main'), ctx = cvs.getContext('2d');
let mul = 1, sR = 0, sC = 0, blk = true, rT = null;

function render() {
    cvs.width = window.innerWidth - 170; cvs.height = window.innerHeight;
    const sD = mul * 6, p = {l: 85, r: 35, t: 15, b: 85};
    const W = cvs.width - p.l - p.r, H = cvs.height - p.t - p.b, cw = W / 39, rh = H / 60;
    
    ctx.fillStyle = '#000'; ctx.fillRect(0,0,cvs.width,cvs.height);

    // 刻度
    ctx.fillStyle = '#ff0000'; ctx.font = '900 24px monospace'; ctx.textAlign = 'right';
    ctx.fillText("60", p.l-15, p.t + 22); ctx.fillText("20", p.l-15, p.t + 59 * rh + 5);

    // 藍色能量條
    for(let i=0; i<39; i++) {
        const x = p.l + i * cw;
        let v = F[i]||0, bh = ((Math.max(20, Math.min(v, 60)) - 20) / 40) * (59 * rh);
        if (i === sC && blk) { ctx.fillStyle = 'rgba(0,255,100,0.15)'; ctx.fillRect(x, p.t, cw, H); }
        ctx.fillStyle = (i === sC && blk) ? '#0ff' : 'rgba(0,100,255,0.45)';
        ctx.fillRect(x + 2, p.t + 59 * rh - bh, cw - 4, bh);
        ctx.fillStyle = (i === sC) ? '#0f0' : '#555'; ctx.font = 'bold 16px monospace'; ctx.textAlign = 'center';
        ctx.fillText((i+1).toString().padStart(2,'0'), x + cw/2, p.t + 59 * rh + 40);
    }

    // 橫線與開獎點
    for(let r=0; r<60; r++) {
        const y = p.t + r * rh + rh/2, show = r < sD;
        ctx.strokeStyle = (r === sR && blk) ? '#ff0000' : (show ? '#222' : '#0a0a0a');
        ctx.lineWidth = (r === sR && blk) ? 3 : 1;
        ctx.beginPath(); ctx.moveTo(p.l, y); ctx.lineTo(p.l + W, y); ctx.stroke();
        if (show && D[r]) {
            D[r].forEach(n => {
                const x = p.l + (n-1)*cw + cw/2, h = (r===sR || n-1===sC) && blk;
                ctx.fillStyle = (r===sR && n-1===sC && blk) ? '#fff' : (h ? '#f00' : '#400000');
                ctx.beginPath(); ctx.arc(x, y, Math.min(cw, rh) / 2.2, 0, Math.PI*2); ctx.fill();
                ctx.fillStyle = (r===sR && n-1===sC && blk) ? '#000' : '#fff';
                ctx.font = '900 11px Arial'; ctx.textAlign='center'; ctx.textBaseline='middle';
                ctx.fillText(n.toString().padStart(2,'0'), x, y);
            });
        }
    }
    if(blk) {
        ctx.strokeStyle = '#00ff00'; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.moveTo(p.l + sC*cw + cw/2, p.t); ctx.lineTo(p.l + sC*cw + cw/2, p.t + 59 * rh + rh/2); ctx.stroke();
    }
}

function startR() {
    clearTimeout(rT);
    const b = document.getElementById('timer-bar');
    b.style.transition = 'none'; b.style.width = '100%';
    setTimeout(() => { b.style.transition = 'width 5s linear'; b.style.width = '0%'; }, 50);
    rT = setTimeout(() => { mul = 1; sR = 0; sC = 0; sync(); }, 5000);
}

function chgD(v) { mul = Math.max(1, Math.min(10, mul+v)); sync(); startR(); }
function chgR(v) { const m = mul * 6; sR = (sR + v + m) % m; sync(); startR(); }
function chgC(v) { sC = (sC + v + 39) % 39; sync(); startR(); }
function sync() {
    document.getElementById('d-v').innerText = (mul * 6).toString().padStart(2,'0');
    document.getElementById('r-v').innerText = sR.toString().padStart(2,'0');
    document.getElementById('c-v').innerText = (sC + 1).toString().padStart(2,'0');
    render();
}

setInterval(() => { blk = !blk; render(); }, 400);
window.onresize = render;
sync();
</script>
</body>
</html>
